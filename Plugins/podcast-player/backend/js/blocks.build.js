!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}({3:function(e,t,n){"use strict";n.r(t);var a=wp.components.CheckboxControl;var o=function(e){var t=e.listItems,n=e.selected,o=e.onItemChange,l=e.label;return wp.element.createElement("div",{className:"components-base-control"},wp.element.createElement("label",{class:"components-base-control__label"},l),wp.element.createElement("ul",{className:"multibox__checklist"},t.map(function(e){return wp.element.createElement("li",{key:e.value,className:"multibox__checklist-item"},wp.element.createElement(a,{label:e.label,checked:n.includes(e.value),onChange:function(){o(e.value)}}))})))};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=wp.i18n.__,m=wp.element,h=m.Component,y=m.Fragment,f=wp.editor,b=f.BlockControls,g=f.InspectorControls,v=f.MediaUpload,w=f.PanelColorSettings,C=wp.apiFetch,E=wp.components,S=E.Dashicon,k=E.SelectControl,P=E.PanelBody,T=E.Button,x=E.Disabled,L=E.Placeholder,_=E.RangeControl,D=E.ServerSideRender,O=E.TextControl,M=E.TextareaControl,A=E.ToggleControl,R=E.Toolbar,j=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this;var o=!(e=!(a=p(t).apply(this,arguments))||"object"!==l(a)&&"function"!=typeof a?s(n):a).props.attributes.feedURL&&"feed"===e.props.attributes.fetchMethod||!e.props.attributes.audioSrc&&"link"===e.props.attributes.fetchMethod;e.state={editing:o,postTypes:[],taxonomies:[],termsList:[]};var r=window.ppmejsSettings||{};return e.isPremium=r.isPremium,e.fetching=!1,e.toggleAttribute=e.toggleAttribute.bind(s(e)),e.onSubmitURL=e.onSubmitURL.bind(s(e)),e}var n,a,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,h),n=t,(a=[{key:"apiDataFetch",value:function(e,t){var n=this;this.fetching?setTimeout(this.apiDataFetch.bind(this,e,t),200):(this.fetching=!0,C({path:"/podcastplayer/v1/"+t}).then(function(t){var a=Object.keys(t);a=a.map(function(e){return{label:t[e],value:e}}),n.setState(i({},e,a)),n.fetching=!1}).catch(function(){n.setState(i({},e,[])),n.fetching=!1}))}},{key:"componentDidMount",value:function(){if(this.isPremium){var e=this.props.attributes.postType;this.apiDataFetch("postTypes","posttypes"),e&&(this.updateTaxonomy(),this.updateTerms())}}},{key:"componentDidUpdate",value:function(e){if(this.isPremium){var t=e.attributes,n=t.postType,a=t.taxonomy,o=this.props.attributes,l=o.postType,r=o.taxonomy;n!==l&&this.updateTaxonomy(),a!==r&&this.updateTerms()}}},{key:"updateTaxonomy",value:function(){var e=this.props.attributes.postType;e?this.apiDataFetch("taxonomies","taxonomies/"+e):this.setState({taxonomies:[],termsList:[]})}},{key:"updateTerms",value:function(){var e=this.props.attributes.taxonomy;e?this.apiDataFetch("termsList","terms/"+e):this.setState({termsList:[]})}},{key:"toggleAttribute",value:function(e){var t=this;return function(){var n=t.props.attributes[e];(0,t.props.setAttributes)(i({},e,!n))}}},{key:"onSubmitURL",value:function(e){e.preventDefault();var t=this.props.attributes,n=t.fetchMethod,a=t.feedURL,o=t.audioSrc;"feed"===n?a&&this.setState({editing:!1}):"link"===n&&o&&this.setState({editing:!1})}},{key:"navMenuSelect",value:function(){var e=window.podcastPlayerData.menu||{};return(e=Array.from(e)).push({label:"- Select Menu -",value:""}),e.map(function(e){return{label:e.label,value:e.value}})}},{key:"render",value:function(){var e=this,t=this.props.attributes,n=t.feedURL,a=t.sortBy,l=t.filterBy,i=t.number,c=t.excerptLength,p=t.podcastMenu,s=t.coverImage,u=t.description,m=t.accentColor,h=t.displayStyle,f=t.aspectRatio,C=t.cropMethod,E=t.gridColumns,j=t.fetchMethod,H=t.postType,U=t.taxonomy,F=t.terms,B=t.podtitle,I=t.audioSrc,N=t.audioTitle,z=t.audioLink,V=t.headerDefault,q=t.hideHeader,G=t.hideTitle,W=t.hideCover,J=t.hideDesc,K=t.hideSubscribe,Q=t.hideSearch,X=t.hideAuthor,Y=t.hideContent,Z=t.hideLoadmore,$=t.hideDownload,ee=t.ahideDownload,te=t.hideSocial,ne=t.ahideSocial,ae=this.state,oe=ae.postTypes,le=ae.taxonomies,re=ae.termsList,ie=this.props.setAttributes,ce=this.navMenuSelect(),pe=window.podcastPlayerData.style||{label:"Default",value:""},se=function(e,t){var n=window.podcastPlayerData.stSup||!1;return!(!n||!e)&&n[e].includes(t)},ue=[{value:"",label:d("No Cropping","podcast-player")},{value:"land1",label:d("Landscape (4:3)","podcast-player")},{value:"land2",label:d("Landscape (3:2)","podcast-player")},{value:"port1",label:d("Portrait (3:4)","podcast-player")},{value:"port2",label:d("Portrait (2:3)","podcast-player")},{value:"wdscrn",label:d("Widescreen (16:9)","podcast-player")},{value:"squr",label:d("Square (1:1)","podcast-player")}],de=[{value:"topleftcrop",label:d("Top Left Cropping","podcast-player")},{value:"topcentercrop",label:d("Top Center Cropping","podcast-player")},{value:"centercrop",label:d("Center Cropping","podcast-player")},{value:"bottomcentercrop",label:d("Bottom Center Cropping","podcast-player")},{value:"bottomleftcrop",label:d("Bottom Left Cropping","podcast-player")}],me=function(t){ie({fetchMethod:t}),"post"===t?e.setState({editing:!1}):e.setState({editing:!0})};if(this.state.editing)return wp.element.createElement(y,null,wp.element.createElement(L,{icon:"rss",label:"RSS"},wp.element.createElement("form",{onSubmit:this.onSubmitURL},"feed"===j&&wp.element.createElement(O,{placeholder:d("Enter URL hereâ€¦","podcast-player"),value:n,onChange:function(e){return ie({feedURL:e})},className:"components-placeholder__input"}),"link"===j&&wp.element.createElement(O,{placeholder:d("Enter Valid Audio/Video File Link (i.e, mp3, ogg, m4a etc.)","podcast-player"),value:I,onChange:function(e){return ie({audioSrc:e})},className:"components-placeholder__input"}),wp.element.createElement(T,{isLarge:!0,type:"submit"},d("Use URL","podcast-player")))),wp.element.createElement(g,null,!!this.isPremium&&wp.element.createElement(P,{initialOpen:!0,title:d("Setup Fetching Method","podcast-player")},wp.element.createElement(k,{label:d("Fetch Podcast Episodes","podcast-player"),value:j,onChange:me,options:[{value:"feed",label:d("from Feed","podcast-player")},{value:"post",label:d("from Post","podcast-player")},{value:"link",label:d("from Audio/Video URL","podcast-player")}]}))));var he=[{icon:"edit",title:d("Edit RSS URL","podcast-player"),onClick:function(){return e.setState({editing:!0})}}];return wp.element.createElement(y,null,wp.element.createElement(b,null,wp.element.createElement(R,{controls:he})),wp.element.createElement(g,null,!!this.isPremium&&wp.element.createElement(P,{initialOpen:!0,title:d("Setup Fetching Method","podcast-player")},wp.element.createElement(k,{label:d("Fetch Podcast Episodes","podcast-player"),value:j,onChange:me,options:[{value:"feed",label:d("from Feed","podcast-player")},{value:"post",label:d("from Post","podcast-player")},{value:"link",label:d("from Audio/Video URL","podcast-player")}]}),oe&&"post"===j&&wp.element.createElement(k,{label:d("Select Post Type","podcast-player"),value:H,options:oe,onChange:function(e){return function(e){ie({terms:[]}),ie({taxonomy:""}),ie({postType:e})}(e)}}),H&&!!le.length&&"post"===j&&wp.element.createElement(k,{label:d("Get items by Taxonomy","podcast-player"),value:U,options:le,onChange:function(e){return function(e){ie({terms:[]}),ie({taxonomy:e})}(e)}}),!!re.length&&"post"===j&&wp.element.createElement(o,{listItems:re,selected:F,onItemChange:function(e){var t=F.indexOf(e);ie(-1===t?{terms:[].concat(r(F),[e])}:{terms:F.filter(function(t){return t!==e})})},label:d("Select Taxonomy Terms","podcast-player")}),"link"===j&&wp.element.createElement(O,{label:d("Episode Title","podcast-player"),value:N,onChange:function(e){return ie({audioTitle:e})}}),"link"===j&&wp.element.createElement(O,{label:d("Podcast episode link for social sharing (optional)","podcast-player"),value:z,onChange:function(e){return ie({audioLink:e})}}),"link"===j&&wp.element.createElement(A,{label:d("Hide Episode Download Link","podcast-player"),checked:!!ee,onChange:function(e){return ie({ahideDownload:e})}}),"link"===j&&wp.element.createElement(A,{label:d("Hide Social Share Links","podcast-player"),checked:!!ne,onChange:function(e){return ie({ahideSocial:e})}})),"link"!==j&&wp.element.createElement(P,{initialOpen:!1,title:d("Change Podcast Content","podcast-player")},this.isPremium&&"post"===j&&wp.element.createElement(O,{label:d("Podcast Title","podcast-player"),value:B,onChange:function(e){return ie({podtitle:e})}}),wp.element.createElement(v,{onSelect:function(e){return ie({coverImage:e.url})},type:"image",value:s,render:function(e){var t=e.open;return wp.element.createElement(T,{className:"pp-cover-btn",onClick:t},s?wp.element.createElement("img",{className:"ppe-cover-image",src:s,alt:d("Cover Image","podcast-player")}):wp.element.createElement("div",{className:"no-image"},wp.element.createElement(S,{icon:"format-image"}),d("Upload Cover Image","podcast-player")))}}),s&&wp.element.createElement(T,{className:"remove-pp-cover",onClick:function(){return ie({coverImage:""})}},d("Remove Cover Image","podcast-player")),wp.element.createElement(M,{label:d("Brief Description","podcast-player"),help:d("Change Default Podcast Description","podcast-player"),value:u,onChange:function(e){return ie({description:e})}}),wp.element.createElement(_,{label:d("Number of episodes to show at a time","podcast-player"),value:i,onChange:function(e){return ie({number:e})},min:1,max:100}),se(h,"excerpt")&&wp.element.createElement(_,{label:d("Excerpt Length","podcast-player"),value:c,onChange:function(e){return ie({excerptLength:e})},min:0,max:200}),wp.element.createElement(k,{label:d("Podcast Custom Menu","podcast-player"),value:p,onChange:function(e){return ie({podcastMenu:e})},options:ce})),"link"!==j&&wp.element.createElement(P,{initialOpen:!1,title:d("Show/Hide Player Items","podcast-player")},!h&&wp.element.createElement(A,{label:d("Show Podcast Header by Default","podcast-player"),checked:!!V,onChange:function(e){return ie({headerDefault:e})}}),wp.element.createElement(A,{label:d("Hide Podcast Header","podcast-player"),checked:!!q,onChange:function(e){return ie({hideHeader:e})}}),!q&&wp.element.createElement(A,{label:d("Hide cover image","podcast-player"),checked:!!W,onChange:function(e){return ie({hideCover:e})}}),!q&&wp.element.createElement(A,{label:d("Hide Podcast Title","podcast-player"),checked:!!G,onChange:function(e){return ie({hideTitle:e})}}),!q&&wp.element.createElement(A,{label:d("Hide Podcast Description","podcast-player"),checked:!!J,onChange:function(e){return ie({hideDesc:e})}}),!q&&wp.element.createElement(A,{label:d("Hide Custom menu","podcast-player"),checked:!!K,onChange:function(e){return ie({hideSubscribe:e})}}),wp.element.createElement(A,{label:d("Hide Podcast Search","podcast-player"),checked:!!Q,onChange:function(e){return ie({hideSearch:e})}}),wp.element.createElement(A,{label:d("Hide Episode Author/Podcaster Name","podcast-player"),checked:!!X,onChange:function(e){return ie({hideAuthor:e})}}),"feed"===j&&wp.element.createElement(A,{label:d("Hide Episode Text Content/Transcript","podcast-player"),checked:!!Y,onChange:function(e){return ie({hideContent:e})}}),wp.element.createElement(A,{label:d("Hide Load More Episodes Button","podcast-player"),checked:!!Z,onChange:function(e){return ie({hideLoadmore:e})}}),wp.element.createElement(A,{label:d("Hide Episode Download Link","podcast-player"),checked:!!$,onChange:function(e){return ie({hideDownload:e})}}),wp.element.createElement(A,{label:d("Hide Social Share Links","podcast-player"),checked:!!te,onChange:function(e){return ie({hideSocial:e})}})),"link"!==j&&wp.element.createElement(P,{initialOpen:!1,title:d("Podcast Player Styling","podcast-player")},wp.element.createElement(k,{label:d("Podcast Player Display Style","podcast-player"),value:h,onChange:function(e){return ie({displayStyle:e})},options:pe}),se(h,"thumbnail")&&wp.element.createElement(k,{label:d("Thumbnail Cropping","podcast-player"),value:f,onChange:function(e){return ie({aspectRatio:e})},options:ue}),se(h,"thumbnail")&&f&&wp.element.createElement(k,{label:d("Thumbnail Cropping Position","podcast-player"),value:C,onChange:function(e){return ie({cropMethod:e})},options:de}),se(h,"grid")&&wp.element.createElement(_,{label:d("Grid Columns","podcast-player"),value:E,onChange:function(e){return ie({gridColumns:e})},min:2,max:6}),wp.element.createElement(w,{title:d("Podcast Player Color Scheme","podcast-player"),initialOpen:!1,colorSettings:[{value:m,onChange:function(e){return ie({accentColor:e})},label:d("Accent Color","podcast-player")}]})),"link"!==j&&wp.element.createElement(P,{initialOpen:!1,title:d("Sort & Filter Options","podcast-player")},wp.element.createElement(k,{label:d("Sort Podcast Episodes By","podcast-player"),value:a,onChange:function(e){return ie({sortBy:e})},options:[{value:"sort_title_desc",label:d("Title Descending","podcast-player")},{value:"sort_title_asc",label:d("Title Ascending","podcast-player")},{value:"sort_date_desc",label:d("Date Descending","podcast-player")},{value:"sort_date_asc",label:d("Date Ascending","podcast-player")}]}),wp.element.createElement(O,{label:d("Show episodes only if title contains following","podcast-player"),value:l,onChange:function(e){return ie({filterBy:e})}}))),wp.element.createElement(x,null,wp.element.createElement(D,{block:"podcast-player/podcast-player",attributes:this.props.attributes})))}}])&&c(n.prototype,a),m&&c(n,m),t}(),H=wp.i18n.__;(0,wp.blocks.registerBlockType)("podcast-player/podcast-player",{title:H("Podcast Player","podcast-player"),description:H("Host your podcast anywhere, display them only using podcasting feed url.","podcast-player"),icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},wp.element.createElement("path",{d:"M32 16c0-8.837-7.163-16-16-16s-16 7.163-16 16c0 6.877 4.339 12.739 10.428 15.002l-0.428 0.998h12l-0.428-0.998c6.089-2.263 10.428-8.125 10.428-15.002zM15.212 19.838c-0.713-0.306-1.212-1.014-1.212-1.838 0-1.105 0.895-2 2-2s2 0.895 2 2c0 0.825-0.499 1.533-1.212 1.839l-0.788-1.839-0.788 1.838zM16.821 19.915c1.815-0.379 3.179-1.988 3.179-3.915 0-2.209-1.791-4-4-4s-4 1.791-4 4c0 1.928 1.364 3.535 3.18 3.913l-2.332 5.441c-2.851-1.223-4.848-4.056-4.848-7.355 0-4.418 3.582-8.375 8-8.375s8 3.957 8 8.375c0 3.299-1.997 6.131-4.848 7.355l-2.331-5.439zM21.514 30.866l-2.31-5.39c3.951-1.336 6.796-5.073 6.796-9.476 0-5.523-4.477-10-10-10s-10 4.477-10 10c0 4.402 2.845 8.14 6.796 9.476l-2.31 5.39c-4.987-2.14-8.481-7.095-8.481-12.866 0-7.729 6.266-14.37 13.995-14.37s13.995 6.641 13.995 14.37c0 5.771-3.494 10.726-8.481 12.866z"})),category:"widgets",keywords:[H("Podcast","featured-content"),H("Feed to Audio","featured-content"),H("Podcasting","featured-content")],edit:j,save:function(){return null}})}});